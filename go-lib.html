<!doctype html><meta charset="utf-8">
<script>
  const DOOR = 'https://script.google.com/macros/s/AKfycbzQmsWA0CdVjdKzXHTSJeNhWFfvou-ffyL_cWQ73piWaakxZ8fv7Z9KPXdvDNae9xEY2A/exec';

  (function () {
    const tk    = localStorage.getItem('tp_token_v1') || '';
    const redir = localStorage.getItem('tp_redirect') || '';

    const hasSession = tk && redir && redir !== '/';
    if (hasSession) {
      location.replace(redir);
    } else {
      // limpia basura anterior
      try { localStorage.removeItem('tp_token_v1'); localStorage.removeItem('tp_redirect'); } catch(e){}
      location.replace(DOOR);
    }
  })();
</script>
