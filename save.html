<!doctype html><meta charset="utf-8">
<script>
  function setCookie(name, value, days){
    const maxAge = days ? days*24*60*60 : 0;
    document.cookie = `${name}=${encodeURIComponent(value)}; Max-Age=${maxAge}; Path=/; SameSite=Lax`;
  }
  const q = new URLSearchParams(location.search);
  const tk    = q.get('tk')     || q.get('token') || '';
  const redir = q.get('redir')  || q.get('redirect') || '/';

  try{ localStorage.setItem('tp_token_v1', tk); }catch(e){}
  try{ localStorage.setItem('tp_redirect',  redir); }catch(e){}

  if (tk)    setCookie('tp_token_v1', tk, 30);
  if (redir) setCookie('tp_redirect',  redir, 30);

  location.replace(redir);
</script>
